{% extends 'radar/index.html' %}
{% block title %}
Radar
{% endblock %}
{% block content %}

<head>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"></script>
    <style>
        .centrado{
            
            position: absolute;
            height: 600px;
            width: 400px;
            left: 50%;
            top: 50%;
            margin-top: -300px;
            margin-left: -200px;
        }
      
        .margen{
            margin-top: 10%;
        }
        .input-group-addon{
            border: none;
            color: transparent;
            background-color: transparent;
            padding: 0px;
        }
        .boton.verde {
            background-color: #00d973; /* Código de un color Verde */
            color: white!important;
        }
        ul
        {
            list-style-type: none;
            object-position: right;
        }
        li {
            list-style: none;
            display: inline;
           
        }
        #containment-wrapper { width: 95%; height:95%; border:2px solid #ccc; padding: 10px; }
          .columna {
            float:left;
            padding: 5px;
            height:100%;
            
          }
        .derecha {
            width: 70%;
          } 
          .izquierda {
            width: 30%;
          } 
    </style>
    <script type="text/javascript">
    $(document).ready(function() {
        $('#nombre').addClass('form-control');
        $('#id_esta_activo').addClass('form-check-input');
        $('#apellidos').addClass('form-control');
        $('#email2').addClass('form-control');
        $('#telefono').addClass('form-control');
        $('#password2').addClass('form-control');

    });

    function isEmail(email) {
        var regex = /^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/;
        return regex.test(email);
    }

    function registrarse() {
        var nombre = $('#nombre').val();
        var apellidos = $('#apellidos').val();
        var email = $('#email2').val();
        var celular = $('#telefono').val();
        var password = $('#password2').val();
        var grupo = $('#grupo').val();
        if (nombre === '') {
            $('#respuestaRegistro').html('Por favor ingresa un nombre');
            return;
        }
        if (apellidos === '') {
            $('#respuestaRegistro').html('Por favor ingresa tus apellidos');
            return;
        }
        if (email === '') {
            $('#respuestaRegistro').html('Por favor ingresa un email');
            return;
        }
        if (!isEmail(email)) {
            $('#respuestaRegistro').html('Por favor ingresa un email válido');
            return;
        }
        if (celular === '') {
            $('#respuestaRegistro').html('Por favor ingresa un número de celular');
            return;
        }
        if (password === '') {
            $('#respuestaRegistro').html('Por favor ingresa una contraseña');
            return;
        }
        if (grupo === '') {
            $('#respuestaRegistro').html('Por favor ingresa un grupo');
            return;
        } else {
            $('#respuestaRegistro').html(grupo);
        }
        $.ajax({
            url: "{% url 'radar:agregarRegistro2' %}",
            type: 'post',
            dataType: 'json',
            cache: false,
            data: $("#registroForm").serialize(),
            beforeSend: function() {
                $('#respuestaRegistro').html("Procesando, espere por favor...");
            },
            success: function(response) {
                if (response.success == 1) {
                    $('#respuestaRegistro').html('Usuario Creado').css({ 'color': 'green' }).fadeIn('slow').delay(3000).hide(1);
                    $('#registroForm').trigger("reset");
                } else {
                    $('#respuestaRegistro').html('Tuvimos un problema en tu registro, por favor vuelve a intentarlo más tarde. ').css({ 'color': 'red' }).fadeIn('slow').delay(5000).hide(1);
                }
            },
            error: function() {
                $('#respuestaRegistro').html('Hubo un error, por favor inténtalo más tarde').css({ 'color': 'red' }).fadeIn('slow').delay(5000).hide(1);
            }
        })
    }
    </script>
</head>
<!--breadcumb-->
<nav aria-label="breadcrumb">
    <ol class="breadcrumb">
        <li class="breadcrumb-item"><a href="#">Inicio</a></li>
        <li class="breadcrumb-item active" aria-current="page">Radar</li>
</nav>

<form method='POST' enctype="">
    {% csrf_token %}

    <select id="seleccion1" name='seleccion1' class="form-control">
          {% for i in players %}
          <option value="{{ i.id }}">{{ i.name }}</option>
          {% endfor %}
    </select>
    <br>
    <select id="seleccion2" name='seleccion2' class="form-control">
          {% for i in players %}
          <option value="{{ i.id }}">{{ i.name }}</option>
          {% endfor %}
    </select>
    <br>
    <button type="submit" class="btn btn-master">Enviar</button>

</form>
{{p1.name}}
<br>
{{p2.name}}
<br>
{% if chart %}
    <img src="data:image/png;base64, {{chart|safe}}">
{% else %}

{% endif %}

<!--
<canvas id="myChart" width="200" height="200"></canvas>
<script>
const ctx = document.getElementById('myChart').getContext('2d');
const myChart = new Chart(ctx, {
    type: 'radar',
    data: {
        labels: ['Games played', 'Minutes played', 'Yellow Cards'],
        datasets: [{
            label: 'Ronaldo',
            data: [43, 40, 2],
            borderWidth: 1,
            fill: true,
            backgroundColor: 'rgba(255, 99, 132, 0.2)',
            borderColor: 'rgb(255, 99, 132)',
            pointBackgroundColor: 'rgb(255, 99, 132)',
            pointBorderColor: '#fff',
            pointHoverBackgroundColor: '#fff',
            pointHoverBorderColor: 'rgb(255, 99, 132)'
        },
                    {
            label: 'Messi',
            data: [34, 50, 2],
            borderWidth: 1,
            fill: true,
            backgroundColor: 'rgba(54, 162, 235, 0.2)',
            borderColor: 'rgb(54, 162, 235)',
            pointBackgroundColor: 'rgb(54, 162, 235)',
            pointBorderColor: '#fff',
            pointHoverBackgroundColor: '#fff',
            pointHoverBorderColor: 'rgb(54, 162, 235)'
        },
        ]
    },
    options: {
        scales: {
            y: {
                beginAtZero: true
            }
        }
    }
});
</script>
-->

{% endblock %}